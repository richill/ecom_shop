<h1>Products</h1>
<div id="products" class="left_right_content_products">
  <!--left_content_products-->
  <div class="left_content_products">
    <!--form-->
    <div>filter</div>
    <div>
      <%= form_with url: products_path, method: :get, class: "search_section" do |f| %>
        <%= f.number_field :min, placeholder: "min price", class: "search_input" %>
        <%= f.number_field :max, placeholder: "max price", class: "search_input" %>
        <%= f.submit "Filter", class: "" %>
      <% end %>
    </div>
    <!--form-->
  </div>

  <!--right_content_products-->
  <div class="right_content_products">
    <ul class="listed_products">
      <% @products.each do |product| %>
        <li class="product_item">
          <!--section-->
          <div class="margin_bottom_15px product_name_cover">
            <div class="product_title">name</div>
            <div><%= product.name %></div>
          </div>
          <!--section-->

          <!--section-->
          <div class="margin_bottom_15px">
            <div class="product_image"><%= image_tag "#{product.image_url}" %></div>
          </div>
          <!--section-->

          <!--section-->
          <% if product.description.present? %>
            <div class="margin_bottom_15px price_cover">
              <div class="product_title">description</div>
              <div><%= product.description %></div>
            </div>
          <% end %>
          <!--section-->

          <!--section-->
          <div class="margin_bottom_15px price_cover">
            <div class="product_title">price</div>
            <div><%= "Â£#{product.price}" %></div>
          </div>
          <!--section-->




          <div>
            <% if user_signed_in? %>
              <% if current_user %>
                <!--impression code-->
                <div><%= "#{product.impressions_count} views" %></div>
                <!--impression code-->

                <!--views-->
                <% if product.reviews.present? %>
                  <div><%= "#{product.average_rating}star (#{product.reviews.count}) reviews" %></div>
                <% else %>
                  <div>no reviews</div>
                <% end %>
                <!--views-->

                <!--favourite-->
                <div id="product-<%= product.id %>">
                  <%= render partial: 'shared/favourites', locals: { product: product} %>
                </div>
                <!--favourite-->
              <% end %>
            <% end %>
          </div>
          <p>
            <%= link_to "view", product %>
          </p>
        </li>
      <% end %>
    </ul>
  </div>
</div>
